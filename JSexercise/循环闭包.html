<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script type="text/javascript">
<!--
    function f() {
        var a = [] ;
        var i ;
        for (i=0;i<3;i++){
            a[i] = function () {
                return i;
            }
        }
        return a ;
    }
    var test = f() ;
    alert(test[0]()) ;//3
    alert(test[1]()) ;//3 闭包不会记录i的值，只是连接

//解决办法一，自己想得 ；
//    function f1() {
//        var a = [] ;
//        var i ;
//        return function () {
//            for (i=0;i<3;i++){
//                a[i] = i ;
//            }
//            return a
//        }
//    }
//    var test1 = f1() ;
//    alert(test1()[0]) ;

//解决办法二，自己想得 ；
function f1() {
    var a = [] ;
    var i ;
    for(i=0;i<3;i++){
        a[i] = (
            function (x) {
                return function () {
                    return x
                }
            }
        )(i)
    }
    return a ;
}
var test1 = f1() ;
alert(test1[0]()) ;

//function f() {
//    function test(x) {
//        return function () {
//            return x ;
//        }
//    }
//    var a = [] ;
//    var i ;
//    for (i=0;i<3;i++){
//        a[i] = test(i)
//    }
//    return a ;
//}
//-->
</script>
</body>
</html>